# Scan-Based Low-Power LBIST for MIPS32 (VHDL)

This repository presents a **VHDL implementation of a low-power Scan-Based Logic Built-In Self-Test (LBIST)** architecture for a **MIPS32 5-stage pipelined processor**.
The design integrates a **Programmable Low-Power Filter (PLPF)** and **Weighted Transition Metric (WTM)** to significantly reduce scan-shift power while maintaining high fault coverage.

The project targets **industrial Design-for-Testability (DFT)** challenges where conventional LBIST causes excessive switching activity and power dissipation.

---

## Project Objectives

* Reduce scan-shift switching activity during LBIST
* Maintain or improve fault coverage
* Provide a synthesizable and scalable VHDL solution
* Integrate seamlessly with a pipelined processor datapath

---

## Key Contributions

* Low-power LBIST architecture with spatial PLPF
* Scan-aware power modeling using Weighted Transition Metric (WTM)
* Dual-mode test strategy for coverage recovery
* Full integration with a MIPS32 5-stage pipeline
* Quantitative evaluation of power and fault coverage

---

## Motivation

Traditional LBIST relies on pseudo-random LFSR patterns that exhibit high transition density during scan shifting. This leads to:

* Excessive dynamic power consumption
* IR drop and reliability concerns
* False test failures
* Over-stressing of silicon

This work mitigates these issues by **controlling scan input transitions** without degrading test quality.

---

## Architecture Overview

```mermaid
flowchart TD
    LFSR[LFSR (40-bit)] --> PLPF[PLPF Bank]
    PLPF --> ScanChains[Pipeline Scan Chains]
    ScanChains --> CUT[MIPS32 Processor]
    CUT --> MISR[MISR Signature Analyzer]
```

---

## Programmable Low-Power Filter (PLPF)

The PLPF selectively suppresses transitions generated by the LFSR using spatial look-ahead logic.

### Features

* Configurable window size (N = 1, 2, 3)
* Multiple PLPFs driven by a single LFSR
* Parallel filtering across scan chains

### Toggle Rate Reduction

| PLPF Window (N) | Expected Toggle Rate |
| --------------- | -------------------- |
| 1 (Bypass)      | 50%                  |
| 2               | ~16.7%               |
| 3               | ~7.14%               |

---

## Weighted Transition Metric (WTM)

WTM models realistic scan power consumption by weighting transitions based on their position in the scan chain.

* Transitions closer to the scan input have higher power impact
* Enables informed partitioning of scan chains
* Guides PLPF deployment strategy

---

## Three-Segment Scan Strategy

| Segment | Scan Length | Toggle Rate | Purpose                     |
| ------- | ----------- | ----------- | --------------------------- |
| Tail    | 25%         | Low (~7%)   | Power stabilization         |
| Middle  | 50%         | High (50%)  | Fault coverage preservation |
| Head    | 25%         | Low (~7%)   | Maximum power reduction     |

This segmentation achieves a balanced trade-off between power and test effectiveness.

---

## Dual-Mode Test Operation

1. **Low-Power Mode (≈90% patterns)**
   PLPF-enabled scan shifting

2. **Final Random Mode (≈10% patterns)**
   Full-random LFSR patterns to detect hard-to-cover faults

---

## Experimental Results

| Configuration      | Fault Coverage | Power Consumption |
| ------------------ | -------------- | ----------------- |
| Conventional LBIST | 99.2%          | 220 mW            |
| PLPF Only          | 97.2%          | 105 mW            |
| PLPF + Final Mode  | 99.3%          | 115 mW            |

The proposed technique reduces power by approximately **48%** while preserving fault coverage.

---

## VHDL Implementation

### Major Modules

* `lfsr40.vhd` — 40-bit maximal-length LFSR
* `Spatial_PLPF.vhd` — Programmable low-power filter
* `dynamic_plpf_taps_40.vhd` — PLPF tap selection logic
* `MISR.vhd` — Signature compression
* `MIPS5Pipe.vhd` — Five-stage MIPS32 pipeline with scan support

All modules are synthesizable and modular.

---

## Verification Methodology

* Switching activity analysis during scan shift
* Statistical evaluation of pattern randomness
* Fault simulation for stuck-at and transition faults
* Power estimation using WTM-based modeling

---

## Future Work

* Adaptive PLPF control using runtime power feedback
* Support for additional fault models
* Scan-aware clock gating
* Extension to superscalar or OoO pipelines

---

Course Project — Design for Testability
November 2025

